exports.id=647,exports.ids=[647],exports.modules={7891:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,3642,23)),Promise.resolve().then(t.t.bind(t,7586,23)),Promise.resolve().then(t.t.bind(t,7838,23)),Promise.resolve().then(t.t.bind(t,8057,23)),Promise.resolve().then(t.t.bind(t,7741,23)),Promise.resolve().then(t.t.bind(t,3118,23))},6296:(e,s,t)=>{Promise.resolve().then(t.bind(t,6646)),Promise.resolve().then(t.bind(t,365)),Promise.resolve().then(t.bind(t,5514))},6646:(e,s,t)=>{"use strict";t.d(s,{Providers:()=>a});var n=t(7247);t(8964);var r=t(4340);function a({children:e}){return n.jsx(r.H,{children:e})}},365:(e,s,t)=>{"use strict";t.d(s,{default:()=>l});var n=t(7247),r=t(9906),a=t(4340),i=t(2488);function l(){let{user:e,signOut:s}=(0,a.a)();return e?(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)("span",{className:"text-xs text-zinc-400",children:[e.email," • ",e.role]}),n.jsx(i.zx,{className:"bg-zinc-800 text-zinc-100 hover:bg-zinc-700",onClick:s,children:"Sign out"})]}):(0,n.jsxs)("div",{className:"space-x-2",children:[n.jsx(r.default,{href:"/auth/sign-in",className:"text-sm hover:underline",children:"Sign in"}),n.jsx(r.default,{href:"/auth/sign-up",className:"text-sm hover:underline",children:"Sign up"})]})}},5514:(e,s,t)=>{"use strict";t.d(s,{default:()=>i});var n=t(7247),r=t(9906),a=t(4340);function i(){let{user:e}=(0,a.a)();return e?(0,n.jsxs)("nav",{className:"flex items-center gap-4 text-sm",children:[n.jsx(r.default,{href:"/",className:"hover:underline",children:"Home"}),n.jsx(r.default,{href:"/submit",className:"hover:underline",children:"Submit"}),n.jsx(r.default,{href:"/jobs",className:"hover:underline",children:"Jobs"})]}):n.jsx("nav",{className:"flex items-center gap-4 text-sm",children:n.jsx(r.default,{href:"/submit",className:"hover:underline",children:"Submit"})})}},6724:(e,s,t)=>{"use strict";t.d(s,{Z:()=>l});var n=t(7247),r=t(8964),a=t(4340);let i="http://127.0.0.1:8000";function l(){let{user:e}=(0,a.a)(),[s,t]=(0,r.useState)("female"),[l,o]=(0,r.useState)(21),[c,d]=(0,r.useState)(""),[u,x]=(0,r.useState)(!0),[m,h]=(0,r.useState)(!1),[b,p]=(0,r.useState)(null),[f,g]=(0,r.useState)(null),[v,j]=(0,r.useState)(!1),[N,y]=(0,r.useState)(null);async function z(){h(!0),g(null),p(null);try{let e=await fetch(`${i}/confessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gender:s,age:Number(l),content:c,anonymous:u,language:"en"})});if(!e.ok)throw Error(`Failed: ${e.status}`);let t=await e.json();p(t)}catch(e){g(e?.message??"Submit failed")}finally{h(!1)}}async function S(e){if(b){j(!0),g(null),y(null);try{let s=await fetch(`${i}/publish/${b.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platforms:e})});if(!s.ok)throw Error(`Publish failed: ${s.status}`);let t=await s.json();y(t)}catch(e){g(e?.message??"Publish failed")}finally{j(!1)}}}return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-4 rounded-lg border border-zinc-800 p-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[n.jsx("label",{className:"text-sm text-zinc-400",children:"Gender"}),(0,n.jsxs)("select",{className:"mt-1 w-full rounded-md border border-zinc-800 bg-zinc-900 px-3 py-2 text-sm text-zinc-100 focus:outline-none focus:ring-2 focus:ring-brand/40",value:s,onChange:e=>t(e.target.value),children:[n.jsx("option",{value:"female",children:"Female"}),n.jsx("option",{value:"male",children:"Male"}),n.jsx("option",{value:"non-binary",children:"Non-binary"}),n.jsx("option",{value:"trans-woman",children:"Transgender woman"}),n.jsx("option",{value:"trans-man",children:"Transgender man"}),n.jsx("option",{value:"genderqueer",children:"Genderqueer"}),n.jsx("option",{value:"genderfluid",children:"Genderfluid"}),n.jsx("option",{value:"agender",children:"Agender"}),n.jsx("option",{value:"prefer-not-to-say",children:"Prefer not to say"}),n.jsx("option",{value:"other",children:"Other"})]})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"text-sm text-zinc-400",children:"Age"}),n.jsx("input",{type:"number",className:"mt-1 w-full rounded-md border border-zinc-800 bg-zinc-900 px-3 py-2 text-sm text-zinc-100 focus:outline-none focus:ring-2 focus:ring-brand/40",value:l,onChange:e=>o(Number(e.target.value)),min:13,max:120})]})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"text-sm text-zinc-400",children:"Content"}),n.jsx("textarea",{rows:10,className:"mt-1 w-full rounded-md border border-zinc-800 bg-zinc-900 px-3 py-2 text-sm text-zinc-100 focus:outline-none focus:ring-2 focus:ring-brand/40",value:c,onChange:e=>d(e.target.value),placeholder:"Write your confession..."})]}),(0,n.jsxs)("label",{className:"flex items-center gap-2 text-sm text-zinc-300",children:[n.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-zinc-700 bg-zinc-900",checked:u,onChange:e=>x(e.currentTarget.checked)}),"Post anonymously"]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:z,disabled:m||!c.trim(),className:"rounded-md bg-brand px-4 py-2 text-sm font-medium text-white disabled:opacity-50",children:m?"Submitting...":"Submit"}),f&&n.jsx("span",{className:"text-sm text-red-400",children:f})]})]}),b&&(0,n.jsxs)("div",{className:"rounded-lg border border-zinc-800 p-4",children:[(0,n.jsxs)("div",{className:"text-sm text-zinc-400",children:["Created #",b.id," • status"," ",n.jsx("span",{className:"approved"===b.status?"text-green-400":"blocked"===b.status?"text-red-400":"text-yellow-400",children:b.status})]}),n.jsx("p",{className:"mt-2 whitespace-pre-wrap",children:b.content}),e&&(0,n.jsxs)("div",{className:"mt-4 flex gap-2",children:[n.jsx("button",{onClick:()=>S(["fb","ig"]),disabled:v||"approved"!==b.status,className:"rounded-md bg-brand px-3 py-2 text-sm text-white disabled:opacity-50",children:v?"Queuing...":"Publish to FB/IG"}),n.jsx("button",{onClick:()=>S(["x"]),disabled:v||"approved"!==b.status,className:"rounded-md bg-zinc-800 px-3 py-2 text-sm text-zinc-100 hover:bg-zinc-700 disabled:opacity-50",children:v?"Queuing...":"Publish to X"})]}),N&&e&&(0,n.jsxs)("p",{className:"mt-2 text-sm text-zinc-400",children:["Publish job queued: id ",N.id,". Check Jobs page."]})]})]})}},2488:(e,s,t)=>{"use strict";t.d(s,{II:()=>i,XZ:()=>l,zx:()=>a});var n=t(7247);t(8964);var r=t(1929);function a({className:e,...s}){return n.jsx("button",{className:(0,r.W)("inline-flex items-center justify-center rounded-md bg-brand px-3 py-2 text-sm font-medium text-black","hover:bg-brand-dark focus:outline-none focus:ring-2 focus:ring-brand/50 disabled:opacity-50",e),...s})}function i({className:e,...s}){return n.jsx("input",{className:(0,r.W)("w-full rounded-md border border-zinc-800 bg-zinc-900 px-3 py-2 text-sm text-zinc-100","placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand/40",e),...s})}function l({className:e,...s}){return n.jsx("input",{type:"checkbox",className:(0,r.W)("h-4 w-4 accent-brand",e),...s})}},4340:(e,s,t)=>{"use strict";t.d(s,{H:()=>l,a:()=>o});var n=t(7247),r=t(8964);let a=(0,r.createContext)(void 0),i="auth:user";function l({children:e}){let[s,t]=(0,r.useState)(null),l=async(e,s)=>{let n=localStorage.getItem(i);if(n){t(JSON.parse(n));return}let r={email:e,role:"user"};localStorage.setItem(i,JSON.stringify(r)),t(r)},o=async(e,s,n=!1)=>{let r={email:e,role:n?"admin":"user"};localStorage.setItem(i,JSON.stringify(r)),t(r)},c=()=>{localStorage.removeItem(i),t(null)},d=(0,r.useMemo)(()=>({user:s,signIn:l,signUp:o,signOut:c}),[s]);return n.jsx(a.Provider,{value:d,children:e})}function o(){let e=(0,r.useContext)(a);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},56:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d,metadata:()=>c});var n=t(2051);t(5023);var r=t(6272),a=t(5347);let i=(0,a.createProxy)(String.raw`/Users/skumarma/Personal_Workspace/apps/web-next/src/app/providers.tsx#Providers`),l=(0,a.createProxy)(String.raw`/Users/skumarma/Personal_Workspace/apps/web-next/src/components/nav-auth.tsx#default`),o=(0,a.createProxy)(String.raw`/Users/skumarma/Personal_Workspace/apps/web-next/src/components/nav-links.tsx#default`),c={title:"Confessions",description:"Anonymous confessions, safely moderated"};function d({children:e}){return n.jsx("html",{lang:"en",className:"h-full",children:n.jsx("body",{className:(0,r.W)("min-h-screen bg-zinc-950 text-zinc-100"),children:(0,n.jsxs)(i,{children:[n.jsx("header",{className:"border-b border-zinc-800",children:(0,n.jsxs)("div",{className:"mx-auto max-w-3xl px-4 py-4 flex items-center justify-between",children:[n.jsx("a",{href:"/",className:"text-xl font-semibold text-brand",children:"Confessions"}),(0,n.jsxs)("nav",{className:"flex items-center gap-4 text-sm",children:[n.jsx(o,{}),n.jsx(l,{})]})]})}),n.jsx("main",{className:"mx-auto max-w-3xl px-4 py-8",children:e})]})})})}},5023:()=>{}};